<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inspection Debug Page</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .debug-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; }
        .result { margin: 10px 0; padding: 10px; background: #f5f5f5; }
        .html-result { background: #d4edda; border: 1px solid #c3e6cb; }
        .json-result { background: #fff3cd; border: 1px solid #ffeaa7; }
        .error-result { background: #f8d7da; border: 1px solid #f5c6cb; }
        button { padding: 10px 15px; margin: 5px; cursor: pointer; }
        pre { background: #f8f9fa; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>Inspection Routes Debug</h1>
    
    <div class="debug-section">
        <h2>Current Page Info</h2>
        <p><strong>Current URL:</strong> <span id="current-url"></span></p>
        <p><strong>Page Title:</strong> <span id="page-title"></span></p>
        <p><strong>Content Type:</strong> <span id="content-type">HTML (this page)</span></p>
    </div>
    
    <div class="debug-section">
        <h2>Test Routes</h2>
        <button onclick="testRoute('/inspection/list', 'HTML List Route')">Test HTML List</button>
        <button onclick="testRoute('/inspection/form', 'HTML Form Route')">Test HTML Form</button>
        <button onclick="testRoute('/inspection/api/list', 'JSON API Route')">Test JSON API</button>
        <div id="test-results"></div>
    </div>
    
    <div class="debug-section">
        <h2>Direct Navigation</h2>
        <p><strong>If you want HTML pages:</strong></p>
        <ul>
            <li><a href="/inspection/list" target="_blank">Inspection List (HTML)</a></li>
            <li><a href="/inspection/form" target="_blank">Inspection Form (HTML)</a></li>
        </ul>
        <p><strong>If you want JSON data:</strong></p>
        <ul>
            <li><a href="/inspection/api/list" target="_blank">Inspection API (JSON)</a></li>
        </ul>
    </div>
    
    <div class="debug-section">
        <h2>Browser Cache Clear</h2>
        <p>If you're still seeing JSON instead of HTML, try:</p>
        <ul>
            <li><strong>Hard Refresh:</strong> Press Ctrl+Shift+R (or Cmd+Shift+R on Mac)</li>
            <li><strong>Clear Cache:</strong> Open Developer Tools → Network tab → check "Disable cache"</li>
            <li><strong>Incognito Mode:</strong> Try opening the page in an incognito/private window</li>
        </ul>
    </div>

    <script>
        // Show current page info
        document.getElementById('current-url').textContent = window.location.href;
        document.getElementById('page-title').textContent = document.title;
        
        async function testRoute(url, description) {
            const results = document.getElementById('test-results');
            
            try {
                const response = await fetch(url);
                const contentType = response.headers.get('content-type');
                const text = await response.text();
                
                const resultDiv = document.createElement('div');
                resultDiv.className = 'result';
                
                if (contentType && contentType.includes('text/html')) {
                    resultDiv.classList.add('html-result');
                    resultDiv.innerHTML = `
                        <strong>${description} (${url})</strong><br>
                        ✅ Returns HTML (${contentType})<br>
                        <small>First 200 chars:</small><br>
                        <pre>${text.substring(0, 200)}...</pre>
                    `;
                } else if (contentType && contentType.includes('application/json')) {
                    resultDiv.classList.add('json-result');
                    resultDiv.innerHTML = `
                        <strong>${description} (${url})</strong><br>
                        ✅ Returns JSON (${contentType})<br>
                        <small>First 200 chars:</small><br>
                        <pre>${text.substring(0, 200)}...</pre>
                    `;
                } else {
                    resultDiv.classList.add('error-result');
                    resultDiv.innerHTML = `
                        <strong>${description} (${url})</strong><br>
                        ❌ Unexpected content type: ${contentType}<br>
                        <small>Response:</small><br>
                        <pre>${text.substring(0, 200)}...</pre>
                    `;
                }
                
                results.appendChild(resultDiv);
            } catch (error) {
                const resultDiv = document.createElement('div');
                resultDiv.className = 'result error-result';
                resultDiv.innerHTML = `
                    <strong>${description} (${url})</strong><br>
                    ❌ Error: ${error.message}
                `;
                results.appendChild(resultDiv);
            }
        }
    </script>
</body>
</html> 